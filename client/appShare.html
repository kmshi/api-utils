<html>
    <head>
        <script src="qrcode.min.js"></script>
    </head>
    <body>
        <canvas id="canvas"></canvas>
        <p id="pwd"></p>
        <script>
            function getQueryVariable(variable) {
                var query = window.location.search.substring(1);
                var vars = query.split('&');
                for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split('=');
                    if (decodeURIComponent(pair[0]) == variable) {
                        return decodeURIComponent(pair[1]);
                    }
                }
                return null;
            }
            const pwd = document.querySelector("#pwd");
            pwd.textContent = getQueryVariable('picUrl');
            
            QRCode.toCanvas(document.getElementById('canvas'), getQueryVariable('shareUrl'), function (error) {
                if (error) console.error(error)
                console.log('success!');
            });
        </script>
    </body>
</html>